Реализация двоично-десятичного счетчика/

Входы:
RST - вход сброса. Если =0, то состояние всех выходов должно быть равно 0.
CLK - сигнал, по которому производится изменение состояния счетчика (по нарастающему фронту).
CE - разрешение счета. Если =0, то счет запрещен.
UD - направление счета. Если =0, то инкремент. Если =1, то декремент.

Выходы:
Q[3:0] - 4-хбитное значение счетчика.
C - выход переполнения. Устанавливается в 1, когда значение счетчика переходит из состояния 1001 в состояние 0000.


Module MainBlock (RST, CLK, CE, UD, Q, C);
Wire RST, CLK, CE, UD, C;
wire [3:0]Q;
input RST, CLK, CE, UD;
output C, Q[3:0];

Initial 
	begin
	Q = 0; C = 0; //инициализация выходов
	end

Always@(posedge CLK) 
	begin
	If ( RST == 0 ) 
		begin
		C = 0; Q = 0; //сброс
		end
	Else 
		begin
		If ( CE == 1 ) 
			begin
			If ( UD == 0 )
				begin
				If ( Q == 9 )
					begin
					Q = 0; C = 1; //обнуляем при переполнении
					end
				Else
					begin
					Q = Q + 1; //инкремент
					C = 0;
					end
				end
			Else
				begin
				If ( Q == 0 )
					begin
					Q = 9; C = 1; //обнуляем при "переполнении"
					end
				Else
					begin
					Q = Q - 1; //декремент
					C = 0;
					end
				end
			end
		end
	end
endmodule
